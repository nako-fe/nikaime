# -*- coding: utf-8 -*-
"""todo.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1jN34u1jZuTwkAORWpobgjCbNC0b4yHJx
"""

import streamlit as st

# --- ã‚¢ãƒ—ãƒªã®ã‚¿ã‚¤ãƒˆãƒ« ---
st.title("ã‚·ãƒ³ãƒ—ãƒ«ãªToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒª")

# --- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆã®åˆæœŸåŒ– ---
# ã‚¢ãƒ—ãƒªã®ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹ãŸã‚ã«ä½¿ç”¨
if "todos" not in st.session_state:
    st.session_state.todos = []

# --- ToDo ã®è¿½åŠ æ©Ÿèƒ½ ---
st.header("æ–°ã—ã„ToDoã‚’è¿½åŠ ")
new_todo = st.text_input("ToDoã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")

if st.button("ToDoã‚’è¿½åŠ "):
    if new_todo: # å…¥åŠ›ãŒç©ºã§ãªã„å ´åˆã®ã¿è¿½åŠ 
        st.session_state.todos.append({"task": new_todo, "completed": False})
        st.success(f"ã€Œ{new_todo}ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼")
        # å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãŸã‚ã«ã€text_inputã®å€¤ã‚’ãƒªã‚»ãƒƒãƒˆ
        # ï¼ˆã“ã‚Œã¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸå¾Œã«è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã‚‹ãŒã€æ˜ç¤ºçš„ã«ç¤ºå”†ï¼‰
        # st.text_input("ToDoã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", value="") # ã“ã‚Œã‚’ã™ã‚‹ã¨ãƒœã‚¿ãƒ³æŠ¼ä¸‹å¾Œã«å‰ã®å…¥åŠ›ãŒæ®‹ã‚‰ãªã„
    else:
        st.warning("ToDoã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")


# --- ToDo ãƒªã‚¹ãƒˆã®è¡¨ç¤º ---
st.header("ã‚ãªãŸã®ToDoãƒªã‚¹ãƒˆ")

if st.session_state.todos:
    # ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’ToDoã”ã¨ã«è¡¨ç¤º
    for i, todo in enumerate(st.session_state.todos):
        col1, col2, col3 = st.columns([0.7, 0.15, 0.15]) # åˆ—ã®æ¯”ç‡ã‚’èª¿æ•´

        with col1:
            # ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§å®Œäº†/æœªå®Œäº†ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
            # key ã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ (index ã‚’åˆ©ç”¨)
            checked = st.checkbox(todo["task"], value=todo["completed"], key=f"checkbox_{i}")
            if checked != todo["completed"]:
                st.session_state.todos[i]["completed"] = checked
                if checked:
                    st.toast(f"ã€Œ{todo['task']}ã€ã‚’å®Œäº†ã—ã¾ã—ãŸï¼")
                else:
                    st.toast(f"ã€Œ{todo['task']}ã€ã‚’æœªå®Œäº†ã«æˆ»ã—ã¾ã—ãŸï¼")
                st.rerun() # çŠ¶æ…‹ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰ã‚¢ãƒ—ãƒªã‚’å†å®Ÿè¡Œã—ã¦è¡¨ç¤ºã‚’æ›´æ–°

        with col2:
            # å®Œäº†æ¸ˆã¿ã®å ´åˆã«ã€Œå®Œäº†ã€è¡¨ç¤º
            if todo["completed"]:
                st.markdown('<p style="color: green; font-weight: bold;">å®Œäº†</p>', unsafe_allow_html=True)
            else:
                st.markdown('<p style="color: orange; font-weight: bold;">æœªå®Œäº†</p>', unsafe_allow_html=True)

        with col3:
            # å‰Šé™¤ãƒœã‚¿ãƒ³
            if st.button("å‰Šé™¤", key=f"delete_button_{i}"):
                st.session_state.todos.pop(i) # ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤
                st.toast(f"ToDoã‚’å‰Šé™¤ã—ã¾ã—ãŸï¼", icon="ğŸ—‘ï¸")
                st.rerun() # å‰Šé™¤ã•ã‚ŒãŸã‚‰ã‚¢ãƒ—ãƒªã‚’å†å®Ÿè¡Œã—ã¦è¡¨ç¤ºã‚’æ›´æ–°
    st.markdown("---") # ãƒªã‚¹ãƒˆã®ä¸‹ã«åŒºåˆ‡ã‚Šç·š

else:
    st.info("ã¾ã ToDoãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ–°ã—ã„ToDoã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼")

# --- ã‚¢ãƒ—ãƒªã®æƒ…å ±ã‚’è¡¨ç¤ºï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ãªã©ï¼‰ ---
# st.write("ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆ:", st.session_state.todos) # é–‹ç™ºä¸­ã«çŠ¶æ…‹ã‚’ç¢ºèªã—ãŸã„å ´åˆ